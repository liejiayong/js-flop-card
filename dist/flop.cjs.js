"use strict";
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */function t(t){return"[object Function]"===Object.prototype.toString.call(t)}"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){if("Element"in t){var e="classList",i="prototype",n=t.Element[i],s=Object,o=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return r.call(t,e)},a=function(t){for(var e=o.call(t.getAttribute("class")||""),i=e?e.split(/\s+/):[],n=0,s=i.length;s>n;n++)this.push(i[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},h=a[i]=[],u=function(){return new a(this)};if(c[i]=Error[i],h.item=function(t){return this[t]||null},h.contains=function(t){return~l(this,t+"")},h.add=function(){var t,e=arguments,i=0,n=e.length,s=!1;do{t=e[i]+"",~l(this,t)||(this.push(t),s=!0)}while(++i<n);s&&this._updateClassName()},h.remove=function(){var t,e,i=arguments,n=0,s=i.length,o=!1;do{for(t=i[n]+"",e=l(this,t);~e;)this.splice(e,1),o=!0,e=l(this,t)}while(++n<s);o&&this._updateClassName()},h.toggle=function(t,e){var i=this.contains(t),n=i?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!i},h.replace=function(t,e){var i=l(t+"");~i&&(this.splice(i,1,e),this._updateClassName())},h.toString=function(){return this.join(" ")},s.defineProperty){var p={get:u,enumerable:!0,configurable:!0};try{s.defineProperty(n,e,p)}catch(t){void 0!==t.number&&-2146823252!==t.number||(p.enumerable=!1,s.defineProperty(n,e,p))}}else s[i].__defineGetter__&&n.__defineGetter__(e,u)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var i,n=arguments.length;for(i=0;n>i;i++)t=arguments[i],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:i.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var i=this.toString().split(" "),n=i.indexOf(t+"");~n&&(i=i.slice(n),this.remove.apply(this,i),this.add(e),this.add.apply(this,i.slice(1)))}),t=null}());class e{constructor(t=null,i={}){this.playing=!1,this.selected=null,this.list=this._resetList(i.list),this.options=this._extend(i,e.options),this.namespaceClass=this._extend(i.namespaceClass={},e.options.namespaceClass),this.$parent=document.querySelector(t),this.init()}init(){const{onBefore:e}=this.options;t(e)&&e(this)}start(){this.reset(),this.playing=!0}reset(){this.playing=!1,this.selected=null;const{onDOMRender:e}=this.options;if(!t(e)){throw new Error("the parameter of turn must be function")}this.list=this._resetList(),e(this)}click(e,i){var n=this,s=n.options,o=n.list[e],r=n.selected;if(o.visible&&!o.open){var c=n.namespaceClass.item,l=n.namespaceClass.itemActive,a=n.$parent.querySelector(c+":nth-of-type("+(e+1)+")");n.list.forEach((function(t,i){i===e&&(t.open=!0,a.classList.add(l))})),n.selected&&(n.list.forEach((function(t){t.open=!0})),o.type===r.type?setTimeout((function(){n.list.forEach((function(t,e){t.type===o.type&&(t.visible=!1,n.$parent.querySelector(c+":nth-of-type("+(e+1)+")").style="visibility: hidden;"),t.open=!1})),n.selected=null,t(i)&&i(n),n._onFinish()}),s.duration):setTimeout((function(){n.list.forEach((function(t,e){t.type!==o.type&&t.type!==r.type||n.$parent.querySelector(c+":nth-of-type("+(e+1)+")").classList.remove(l),t.open=!1})),n.selected=null,n._onFinish(),t(i)&&i(n)}),s.duration)),n.selected=o}}_onFinish(){this.list.reduce((function(t,e){return e.visible||(t+=1),t}),0)===this.list.length&&t(this.options.onFinished)&&(this.options.onFinished(this),this.playing=!1)}_resetList(t=this.options.list){return(t=function(t){let e=t.slice();for(let t=0;t<e.length;t++){let s=(i=0,n=t,Math.floor(Math.random()*(n-i+1)+i)),o=e[t];e[t]=e[s],e[s]=o}var i,n;return e}(t)).map((function(t,e){return{type:t,open:!1,visible:!0}}))}_extend(t,e){const i={};for(let n in e)t[n]?i[n]=t[n]:i[n]=e[n];return i}}e.options=Object.freeze({list:[],duration:1200,namespaceClass:{container:".flop-container",item:".flop-item",itemActive:"active"},onBefore:()=>{},onFinished:()=>{},onDOMRender:()=>{}}),module.exports=e;
